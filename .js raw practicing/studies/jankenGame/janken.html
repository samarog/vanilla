<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Janken Game v0.1</title>
</head>
<body>

  <h2>Janken</h2>

  <button onclick="
  result = playGame('rock');
  console.log(placard);
  ">Rock</button>
  
  <button onclick="
  result = playGame('paper')
  console.log(placard);
  ">Paper</button>
  
  <button onclick="
  result = playGame('scissors')
  console.log(placard);
  ">Scissors</button>

  <button style="display: inline; margin-left: 4%;" onclick="

  simGame(prompt('How many matches?'));
  ">Sim Game</button>

  <button onclick="
      alert(score);

  ">Form</button>

  <button onclick="
  placard.wins = 0
  placard.losses = 0
  placard.ties = 0
  score = []
  localStorage.removeItem('placard');
  localStorage.removeItem('score');
  ">Reset Score</button>


  <script>

    // localStorage:
    let placard = JSON.parse(localStorage.getItem('placard')) || { wins: 0, ties: 0, losses: 0 };
        console.log(placard);
    let score = JSON.parse(localStorage.getItem('score')) || [];
    let calculation = localStorage.getItem('calculation') || '';

    const rock = 1;
    const paper = 2;
    const scissors = 3;

    let result = '';

    // Engine:  
    
    function playGame(playerMove) {

      let cpuMove = Math.ceil(Math.random()*3);

      let cpuMoveVsRock = '';

  if (playerMove === 'rock') {
    if (cpuMove === 1) {
      cpuMoveVsRock = `rock`;
      result = `It's a tie.`;
      placard.ties++
      score.push('游리')
    } else if (cpuMove === 2) {
      cpuMoveVsRock = `paper`;
      result = 'You lose.';
      placard.losses++
      score.push('游댮')
    } else if (cpuMove === 3) {
      cpuMoveVsRock = `scissors`;
      result = 'You win.'
      placard.wins++
      score.push('游릭')
    }

      console.log(cpuMoveVsRock);

    localStorage.setItem('placard', JSON.stringify(placard))

    alert(`You picked ${playerMove}. CPU chose ${cpuMoveVsRock}. ${result}
Wins: ${placard.wins} Ties: ${placard.ties} Losses: ${placard.losses}`);

  } else if (playerMove === 'paper') {

  cpuMove = Math.ceil(Math.random()*3);

  let cpuMoveVsPaper = '';
  
  
  if (cpuMove === rock) {
    cpuMoveVsPaper = `rock`;
    result = 'You win.'
    placard.wins++
    score.push('游릭')
  } else if (cpuMove === paper) {
    cpuMoveVsPaper = `paper`;
    result = `It's a tie.`;
    placard.ties++
    score.push('游리')
  } else if (cpuMove === scissors) {
    cpuMoveVsPaper = `scissors`;
    result = 'You lose.';
    placard.losses++
    score.push('游댮')
  }

  console.log(cpuMoveVsPaper);

  localStorage.setItem('placard', JSON.stringify(placard))

  alert(`You picked paper. CPU chose ${cpuMoveVsPaper}. ${result}
Wins: ${placard.wins} Ties: ${placard.ties} Losses: ${placard.losses}`);

  } else if (playerMove === 'scissors') {

  cpuMove = Math.ceil(Math.random()*3);

  let cpuMoveVsScissors = '';

  if (cpuMove === rock) {
    cpuMoveVsScissors = `rock`;
    result = 'You lose.';
    placard.losses++
    score.push('游댮')
  } else if (cpuMove === paper) {
    cpuMoveVsScissors = `paper`;
    result = 'You win.'
    placard.wins++
    score.push('游릭')
  } else if (cpuMove === scissors) {
    cpuMoveVsScissors = `scissors`;
    result = `It's a tie.`;
    placard.ties++
    score.push('游리')
  }

  console.log(cpuMoveVsScissors);

  localStorage.setItem('placard', JSON.stringify(placard))


  alert(`You picked scissors. CPU chose ${cpuMoveVsScissors}. ${result}
Wins: ${placard.wins} Ties: ${placard.ties} Losses: ${placard.losses}`);
  }

      return result
}

function simGame(numberOfGames) {

  for (let y = 1; y <= numberOfGames; y++) {
    let simMatch = Math.ceil(Math.random()*3)

    if (simMatch === 1) {
      result = 'You lose.';
      placard.losses++
      score.push('游댮')
    } else if (simMatch === 2) {
      result = `It's a tie.`;
      placard.ties++
      score.push('游리')
    } else if (simMatch === 3) {
      result = 'You win.'
      placard.wins++
      score.push('游릭')
    }
  }

  localStorage.setItem('placard', JSON.stringify(placard))
  localStorage.setItem('score', JSON.stringify(score))

  console.log(placard);

  alert(`I know it's not pretty but I'm purposely representing the outcome with JSON stringify just for testing: ${JSON.stringify(placard)}`); // M칠todo para representar por string tudo o que est치 dentro de um objecto. N칚o 칠 visualmente recomend치vel.
} 
  </script>
</body>
</html>